# 计算机网络

问题：

看网测题，课后习题，ppT

- 硬件之地地址和ip地址的区别和联系
- 协议配置：配置一些什么样的选项，如何配置
- 复用的概念
- 因特网的组成：两个部分核心部分互联设备路由器互联网，边缘部分主机
- 网络层ip协议，运输层udp协议，各自的功能能否替代
- 第六章如何访问万维网文档，需要http协议，应用层协议、运输层协议等等
- 计算题（15）：循环冗余码、crc校验（多项式怎么分解成除数，计算算法，最后需要得到商还是余数）、怎么计算发送延迟（与本身数据长度和发送速率有关），传播延迟（距离除以发送速率），处理延迟、已知ip地址，掩码，计算网络地址
- 应用题（30）：网络层RIP协议(计算算法)，传输层滑动窗口协议，ip地址分配方案



## 在线测试总结

### 一、

![image-20230215160306306](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215160306306.png)

![image-20230215160642445](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215160642445.png)

这里SDU才是层与层之间传递，PDU是同层传输

![image-20230215160936272](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215160936272.png)

![image-20230226161213485](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230226161213485.png)



![image-20230215161230458](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215161230458.png)

![image-20230215161357866](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215161357866.png)

### 二、

![image-20230215162041928](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215162041928.png)

![image-20230215162217431](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215162217431.png)

![image-20230215162229878](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215162229878.png)

![image-20230215163523129](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215163523129.png)

![image-20230215163937741](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215163937741.png)

### 三、

![image-20230215171447980](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215171447980.png)

![image-20230215171802364](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215171802364.png)

零比特传输法：
如果连续出现五个以上的1就在第五个1后面加上一个0隔开![image-20230215172344480](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215172344480.png)

![image-20230215172445930](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215172445930.png)

![image-20230215172508781](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215172508781.png)

### 四、

![image-20230216153315015](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216153315015.png)

除了以上的其余都是公网IP![image-20230216153402233](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216153402233.png)

![image-20230216154657809](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216154657809.png)

![image-20230216155021066](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216155021066.png)

![image-20230216155038034](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216155038034.png)

![image-20230216155714830](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216155714830.png)

![image-20230216155731582](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216155731582.png)

![image-20230216160414490](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216160414490.png)

![image-20230216160429715](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216160429715.png)

### 五、

![image-20230216195143942](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216195143942.png)

![image-20230216195224715](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216195224715.png)

![image-20230216195327674](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216195327674.png)

![image-20230216195524409](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216195524409.png)

![image-20230216195740983](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216195740983.png)

![image-20230216195815213](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216195815213.png)

![image-20230216195837351](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216195837351.png)

![image-20230216200036533](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216200036533.png)

![image-20230216200050790](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216200050790.png)

![image-20230216200201507](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216200201507.png)

![image-20230216201635150](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216201635150.png)

![image-20230216201740874](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216201740874.png)

![image-20230216201747564](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216201747564.png)

![image-20230216201816881](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216201816881.png)

![image-20230216201940306](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216201940306.png)

![image-20230216202054851](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216202054851.png)

### 六、

![](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217180022034.png)

![image-20230217180035098](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217180035098.png)

![image-20230217180057363](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217180057363.png)

![](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217180113103.png)

![image-20230217180143089](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217180143089.png)

![image-20230217180210931](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217180210931.png)

![image-20230217180237616](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217180237616.png)

![image-20230217180250513](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217180250513.png)

![image-20230217180308759](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217180308759.png)

![image-20230217180331503](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217180331503.png)

![image-20230217180410144](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217180410144.png)

![image-20230217180435881](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217180435881.png)

![image-20230217181339700](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217181339700.png)

![image-20230217181353807](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217181353807.png)

![image-20230217181409433](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217181409433.png)

![image-20230217181430995](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217181430995.png)

![image-20230217181528915](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217181528915.png)

![image-20230217181556043](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217181556043.png)

![image-20230217181608661](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217181608661.png)

![image-20230217181623387](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217181623387.png)

![image-20230217181639663](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217181639663.png)

## 第二章：物理层

常用编码方式：

- 曼彻斯特编码：位中心上跳代表0，下跳代表1反之亦然
- 差分曼彻斯特编码：位中心一定跳，位边界跳代表0，没跳代表1

### 信道复用 

频分复用：一个用户一直占用一个信道，分成很多个频

时分复用：用户没用时也会保留该用户的空隙，信道利用率不高，按照时间间隔来分成多个部分

统计时分复用：时分复用的升级版，根据用户使用动态分配时隙

波分复用：光的频分复用，用光纤来同时传播多个光载波信号，左右两侧需要光调制器和光解调器

码分复用：为每个用户挑选不同的码型，此间就不会造成干扰



## 第三章：数据链路层

数据链路层信道类型：点对点信道、广播通信

### 三大基本问题

#### 1.封装成帧

- 在一段数据的前后添加首部(SOH)尾部(EOT)，他们的作用就是进行 **帧定界**

#### 2.透明传输

若是在数据中出现 (SOH)(EOT)![image-20230214151312692](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230214151312692.png)

![image-20230214151404633](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230214151404633.png)

#### 3.差错检测

循环冗余检测CRC:![image-20230214153326430](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230214153326430.png)

![image-20230214153339638](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230214153339638.png)

帧检测序列FCS:

- FCS是添加在数据后面的冗余码
- CRC可以得到 FCS ,但还有其他方法也可以得到 FCS
  - 例如：广泛使用的生成多项式P(x)![image-20230214153845064](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230214153845064.png)



### 可靠传输

意思是：发送啥就能接收啥

帧编号

确认机制

重传机制



### ppp协议

点对点协议![image-20230214160458258](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230214160458258.png)

ppp 协议计算?



### CSMA/CD 协议

#### 多点接入

说明是总线型网络

总线网使用的标准是 IEEE802.3

只能使用半双工通信

#### 载波监听

边发送边监听，每个站都在不停的检测信道

#### 碰撞检测

适配器便发送数据，边检测信道上的信号电压的变化情况。电压摆动值超过一定的门限值，就认为总线上至少有两个站在同时发送数据，表明产生了碰撞。

- 适配器立即停止发送
- 等待一段随机时间后再次发送

![image-20230214162738504](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230214162738504.png)

### MAC地址

![image-20230215152512948](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215152512948.png)

### 生成树协议STP

原理是最小生成树，解决网络中的回路问题

## 网络层

### 网络层向上层提供服务

两种观点：

1. 面向连接的可靠交付
2. 无连接的、尽最大努力交付的数据报服务，不提供服务质量的承诺

### 子网掩码

### 路由聚合



### ip地址

### 地址解析协议ARP

ARP用于解决 **同一个局域网上** 的主机或路由器的IP地址和MAC地址的映射问题

#### ARP高速缓存

ARPyon缓存出ip地址对应的mac地址，否则就运行ARP更新ARP高速缓存

#### ARP工作

在映射表中查找是否有对应的ip地址，有则取出ip地址对应的mac地址，否则就运行ARP



#### 非同一网络下

发送到路由器上，由另一路由器来完成ARP高速缓存，ARP工作



### 为什么要同时使用ip地址和mac地址

因为全球不同网络使用不同的mac地址，mac地址之间的转换非常复杂、

对mac寻址是十分困难的

IP地址能解决以上的问题，连接到互联网的主机只需各自拥有一个唯一的IP地址，他们之间的通信就像在同一个网络上那样方便，如果不在同一网络也只是多次调用ARP来找到mac地址。

查找地址

- 检测目标地址是否在本网络：将目标地址与本网络掩码逐比特AND![image-20230215190523790](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215190523790.png)
- 检测AND出来的地址是否匹配，不匹配则继续往下匹配![image-20230215190807747](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215190807747.png)
- 匹配成功![image-20230215190833730](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215190833730.png)

### 网际控制报文协议ICMP

允许主机或路由器报告差错情况和提供有关异常情况的报告

ICMP是互联网的标准协议

但ICMP不是高层协议，而是IP层的协议

#### ICMP作用

![image-20230215201342702](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215201342702.png)

#### ICMP报文的种类

##### 差错报告报文

1. 终点不可达
2. 源点抑制
3. 时间超过
4. 参数问题
5. 改变路由（重定向）

##### 询问报文

1. 回送请求和回答
   1. 检测目的站是否可达
2. 时间戳请求和回答
   1. 进行时钟同步和测量时间

#### ICMP应用举例

ping测试连通性

跟踪路由

### IPv6

 ### VPN

NAT：本地电脑向外界电脑发送数据时，路由器会将本地电脑的运行程序的端口随机分配一个路由器的端口，并将本地电脑iP地址转换为路由器的公网ip地址

端口映射：将本地的电脑端口映射到路由器上，这样可以让外界的电脑通过该端口访问本地的电脑

内网穿透：两台本地电脑连接到同一个服务器上，间接实现两台电脑的互联

此处有个问题：为什么不直接端口映射呢？让另外一台电脑访问自己的电脑？

答：因为我国一般有着套娃操作路由器之上还有路由器，比如家里有台路由器，路由器连接到了楼栋的路由器，所有楼栋的路由器在连接到移动的路由器，这样一来仅仅只有移动的那台路由器才具备公网IP，那么我们要写规则进行端口映射仅仅只能对家里的路由器进行操作，无法操作楼栋的路由器甚至移动的路由器，这样便无法实现端口映射![image-20230215215535909](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230215215535909.png)

 



### RIP协议

用来判断路由器下一跳的最佳选择，它是内部网关协议

## 运输层

![image-20230216162715673](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216162715673.png)

 ![image-20230216164054142](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216164054142.png)

#### UDP和TCP对比

![image-20230216165108784](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216165108784.png)

### TCP流量控制

 ![image-20230216171941898](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216171941898.png)

### TCP拥塞控制

假定条件

1. 单方向传输
2. 接收方有足够大的缓存空间，因而发送方发送窗口的大小由王鲁吉欧的拥塞程度来决定
3. 以最大报文段MSS的个数为讨论问题的单位，而不是以字节为单位

#### 慢开始

从1呈指数增长

#### 拥塞避免

等于慢开始门限值以后每次仅+1，当发生拥塞时将慢开始门限值更改为当前值的一半，拥塞窗口重新更改为1，并重新执行慢开始算法

#### 快重传

发送方不用等到接收方传回确认再继续发送，而是一直发送数据。比如发送1-5段数据，若第3段丢失，接收方会反复回传没收到第3段数据的信息，如此反复回传三次后，发送方会重新发送第三段数据，并且将和第三段数据以后的数据进行整合

#### 快恢复

当反复收到三次回传信息时，更新门限值为当前拥塞窗口值的一般，转而继续执行拥塞避免算法

![image-20230216181449018](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216181449018.png)

### TCP超时重传时间的选择

### TCP可靠传输的实现

TCP基于以**字节**为单位的**滑动窗口**来实现可靠传输

  ![image-20230216185201041](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216185201041.png)

### TCP连接与断开

#### TCP连接建立

![image-20230216190436991](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216190436991.png)

#### TCP连接断开

![image-20230216191725788](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230216191725788.png)

## 应用层

域名系统DNS

动态主机配置DHCP

电子邮件

文件传送FTP和P2P文件共享

多媒体网络应用

![image-20230217152343655](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217152343655.png)



### 客户/服务器方式（c/s）和对等方式（P2P）

 ![image-20230217161553842](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217161553842.png)

### 动态主机配置协议DHCP

![image-20230217163134487](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217163134487.png)

DHCP中继代理

### 域名系统DNS 

![image-20230217164650431](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217164650431.png)

### 文件传送协议FTP

![image-20230217165441499](E:\image-20230217165441499.png)

#### SMTP



### 万维网WWW

![image-20230217173538305](https://olrando.oss-cn-chengdu.aliyuncs.com/img/image-20230217173538305.png)





